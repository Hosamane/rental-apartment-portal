<div class="p-6 space-y-8">

  <!-- PAGE TITLE -->
  <h2 class="text-2xl font-semibold text-gray-800">
    User Dashboard
  </h2>

  <!-- FILTER BY TOWER -->
  <div class="bg-white rounded-lg shadow-md p-6 max-w-md">
    <h3 class="text-lg font-semibold text-gray-700 mb-3">
      Filter by Tower
    </h3>

    <select
      class="w-full px-4 py-2 border rounded-lg
             focus:ring-2 focus:ring-blue-500"
      (change)="filterByTower($any($event.target).value || null)"
    >
      <option value="">All Towers</option>
      <option *ngFor="let t of towers()" [value]="t.id">
        {{ t.name }}
      </option>
    </select>
  </div>

  <!-- AVAILABLE UNITS -->
  <div class="space-y-4">

    <h3 class="text-lg font-semibold text-gray-700">
      Available Units
    </h3>

    <!-- LOADING -->
    <div *ngIf="loading()" class="text-gray-500">
      Loading units...
    </div>

    <!-- UNITS GRID -->
    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
    >

      <!-- UNIT CARD -->
      <div
        *ngFor="let u of units()"
        class="bg-white rounded-lg shadow-md p-5 border
               hover:shadow-lg transition"
      >

        <!-- UNIT INFO -->
        <p class="text-sm text-gray-500">Unit</p>
        <p class="text-lg font-semibold text-gray-800">
          {{ u.unit_number }}
        </p>

        <div class="mt-2 space-y-1 text-sm text-gray-700">
          <p><b>Tower:</b> {{ u.tower_name }}</p>
          <p><b>Bedrooms:</b> {{ u.bedrooms }}</p>
          <p><b>Rent:</b> ₹{{ u.rent }}</p>
          <p>
            <b>Amenities:</b>
            {{ u.amenities.join(', ') || '—' }}
          </p>
        </div>

        <!-- LEASE START OPTIONS -->
        <!-- LEASE PERIOD -->
<div class="mt-4 space-y-3 text-sm">

  <p class="font-medium text-gray-700">
    Lease Period
  </p>

  <!-- START DATE -->
  <div>
    <label class="block text-xs text-gray-600 mb-1">
      Start Date
    </label>
    <input
      type="date"
      [min]="today"
      [(ngModel)]="leaseStartDate"
      class="w-full px-3 py-2 border rounded-lg
             focus:ring-2 focus:ring-blue-500"
    />
  </div>

  <!-- END DATE -->
  <div>
    <label class="block text-xs text-gray-600 mb-1">
      End Date
    </label>
    <input
      type="date"
      [min]="leaseStartDate || today"
      [(ngModel)]="leaseEndDate"
      class="w-full px-3 py-2 border rounded-lg
             focus:ring-2 focus:ring-blue-500"
    />
  </div>

  <!-- VALIDATION MESSAGE -->
  <p
    *ngIf="leaseError"
    class="text-red-600 text-xs"
  >
    {{ leaseError }}
  </p>

</div>

<!-- BOOK BUTTON -->
<button
  (click)="bookUnit(u.id)"
  class="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg
         hover:bg-blue-700 transition font-semibold"
>
  Book Unit
</button>


      </div>
    </div>
  </div>

</div>
